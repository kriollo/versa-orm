### Tarea 1.1: Relaciones Uno-a-Uno (HasOne, BelongsTo) [X] COMPLETADA
- [X] Mï¿½todos `hasOne` y `belongsTo` en VersaModel/traits
- [X] Lazy loading por defecto
- [X] Consultas SQL en Rust con claves forï¿½neas/locales
- [X] Tests unitarios e integraciÃ³n en PHP y Rust
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cï¿½digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anï¿½lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mï¿½s rï¿½pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 1.2: Relaciones Uno-a-Muchos (HasMany) [X] COMPLETADA
- [X] Mï¿½todo `hasMany` en VersaModel/traits
- [X] Consultas SQL en Rust para mÃºltiples registros
- [X] OptimizaciÃ³n con WHERE IN para eager loading
- [X] Tests unitarios e integraciÃ³n en PHP y Rust
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cï¿½digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anï¿½lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mï¿½s rï¿½pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 1.3: Relaciones Muchos-a-Muchos (BelongsToMany) [X] COMPLETADA
- [X] Mï¿½todo `belongsToMany` en VersaModel/traits
- [X] Consultas SQL en Rust con JOIN y tabla pivote
- [X] Tests unitarios e integraciÃ³n en PHP y Rust
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cï¿½digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anï¿½lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mï¿½s rï¿½pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 1.4: Lazy/Eager Loading [X] COMPLETADA
- [X] Lazy loading controlado en PHP
- [X] Mï¿½todo `with()` para eager loading
- [X] Consultas optimizadas en Rust
- [X] GeneraciÃ³n de PHPDocs automÃ¡ticos
- [X] Tests unitarios e integraciÃ³n en PHP y Rust
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cï¿½digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anï¿½lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mï¿½s rï¿½pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 1.5: Transacciones [X] COMPLETADA
- [X] Mï¿½todos `beginTransaction`, `commit`, `rollBack` en VersaORM
- [X] Comandos de transacciÃ³n en Rust
- [X] Soporte para transacciones anidadas
- [X] Tests unitarios e integraciÃ³n en PHP y Rust
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cï¿½digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anï¿½lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mï¿½s rï¿½pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 2.2: Operaciones en Lote (Batch) âœ… COMPLETADA
- [X] MÃ©todo `insertMany` en QueryBuilder
- [X] MÃ©todo `updateMany` en QueryBuilder
- [X] MÃ©todo `deleteMany` en QueryBuilder
- [X] MÃ©todo `upsertMany` en QueryBuilder
- [X] SQL optimizado en Rust para batch
- [X] Tests unitarios e integraciÃ³n
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cÃ³digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anÃ¡lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mÃ¡s rÃ¡pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 2.3: Subconsultas y Expresiones Raw âœ… COMPLETADA
- [X] Soporte bÃ¡sico en QueryBuilder
- [X] Subconsultas completas en SELECT y WHERE
- [X] MÃ©todos `selectRaw`, `orderByRaw`, `groupByRaw`
- [X] ValidaciÃ³n segura en PHP con sistema de seguridad robusto
- [X] Tests unitarios e integraciÃ³n
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cÃ³digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anÃ¡lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mÃ¡s rÃ¡pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

** Tarea 1.6** - ValidaciÃ³n Avanzada y Mass Assignment - **COMPLETADA**
- [X] SanitizaciÃ³n bÃ¡sica en Rust
- [X] MÃ©todo `validate()` en VersaModel/traits
- [X] ValidaciÃ³n automÃ¡tica desde esquema de BD (integraciÃ³n con metadatos Rust)
- [X] Propiedades `$fillable` y `$guarded` en modelos
- [X] ValidaciÃ³n en `store()` y `update()`
- [X] IntegraciÃ³n con librerÃ­a de validaciÃ³n PHP
- [X] ValidaciÃ³n estricta de Mass Assignment
- [X] Tests unitarios para validaciÃ³n y errores
- [X] DocumentaciÃ³n actualizada
- [X] Checklist de calidad:
    - [X] Ejecutar phpstan y corregir errores PHP
    - [X] Ejecutar php-cs-fixer fix para formato de cÃ³digo
    - [X] Ejecutar psalm --plugin=psalm-security-plugin para anÃ¡lisis de seguridad
    - [X] Ejecutar cargo clippy y corregir errores Rust
    - [X] Compilar binario Rust y copiar a src/binary
    - [X] Ejecutar composer dump-autoload -o genera el autoloader mÃ¡s rÃ¡pido y liviano para entornos de despliegue
    - [X] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 7.2: ImplementaciÃ³n de Modo Freeze/Frozen para Modelos y Esquema [âœ…] COMPLETADA
- [x] MÃ©todo global `$orm->freeze(true)` para activar el modo freeze en toda la aplicaciÃ³n
- [x] Permitir marcar modelos individuales como frozen: `User::freeze(true)`
- [x] Bloquear mÃ©todos que alteren el esquema (createTable, addColumn, dropColumn) cuando freeze estÃ¡ activo
- [x] Lanzar excepciÃ³n si se intenta modificar el esquema o propiedades protegidas en modo freeze
- [x] Mostrar advertencia en modo desarrollo si se intenta una operaciÃ³n prohibida
- [x] Validar en Rust que no se ejecuten comandos DDL si freeze estÃ¡ activo
- [x] Propagar el estado freeze desde PHP al binario Rust en cada payload
- [x] Registrar intentos de alteraciÃ³n en los logs de seguridad
- [x] Tests unitarios para verificar que las operaciones prohibidas lanzan excepciÃ³n en modo freeze
- [x] Documentar claramente el uso y las limitaciones del modo freeze
- [x] **ðŸ†• FUNCIONALIDAD ADICIONAL: CreaciÃ³n AutomÃ¡tica de Campos (estilo RedBeanPHP)**
  - [x] Cuando freeze estÃ¡ desactivado, crear automÃ¡ticamente columnas faltantes
  - [x] DetecciÃ³n automÃ¡tica de tipos PHP â†’ SQL (stringâ†’VARCHAR, intâ†’INT, boolâ†’BOOLEAN, etc.)
  - [x] ValidaciÃ³n que no interfiera con el modo freeze activo
  - [x] Tests completos para verificar la creaciÃ³n automÃ¡tica de campos
  - [x] DocumentaciÃ³n actualizada con ejemplos prÃ¡cticos
- [x] Checklist de calidad:
    - [x] Ejecutar phpstan y corregir errores PHP
    - [x] Ejecutar php-cs-fixer fix para formato de cÃ³digo
    - [x] Ejecutar psalm --plugin=psalm-security-plugin para anÃ¡lisis de seguridad
    - [x] Ejecutar cargo clippy y corregir errores Rust
    - [x] Compilar binario Rust y copiar a src/binary
    - [x] Ejecutar composer dump-autoload -o genera el autoloader mÃ¡s rÃ¡pido y liviano para entornos de despliegue
    - [x] Ejecutar tests de PHP y Rust, corregir errores y volver a validar

### Tarea 5.1: Soporte para Tipos de Datos Avanzados y Personalizados [âœ…] COMPLETADA
- [x] Sistema bÃ¡sico de manejo de tipos en `utils.rs` (`cast_types()`, `cast_value_by_type()`)
- [x] Mapeos especÃ­ficos de tipos especiales (JSON, UUID, INET, ENUM, SET)
- [x] Conversiones automÃ¡ticas y fallback para tipos binarios (BLOB, VARBINARY)
- [x] Soporte completo para tipos de array PostgreSQL
- [x] Archivo de configuraciÃ³n JSON para mappings manuales (`config/type_mappings.json`)
- [x] Tipado fuerte bidireccional Rust â†” PHP (int, float, bool, null correctos)
- [x] Capacidades para definir manualmente tipos en VersaModel
- [x] Clases PHP con propiedades tipadas (PHP 8+) - Ejemplo: `TypedProduct.php`
- [x] ValidaciÃ³n de esquema vs modelo
- [x] Advertencias en consola si modelo difiere del esquema
- [x] Pruebas unitarias para cada tipo especial por base de datos (`DatabaseSpecificTypesTest.php`)
- [x] Documentar tipos soportados por base de datos (`docs/user-guide/09-advanced-data-types.md`)
- [x] Checklist de calidad:
    - [x] Ejecutar phpstan y corregir errores PHP
    - [x] Ejecutar php-cs-fixer fix para formato de cÃ³digo
    - [x] Ejecutar psalm --plugin=psalm-security-plugin para anÃ¡lisis de seguridad
    - [x] Ejecutar cargo clippy y corregir errores Rust
    - [x] Compilar binario Rust y copiar a src/binary
    - [x] Ejecutar composer dump-autoload -o genera el autoloader mÃ¡s rÃ¡pido y liviano para entornos de despliegue
    - [x] Ejecutar tests de PHP y Rust, corregir errores y volver a validar
### Tarea 5.5: ImplementaciÃ³n de Modo Lazy y Planificador de Consultas [âœ…] COMPLETADA - Â¡FINALIZADA!
- [x] MÃ©todo ->lazy() en QueryBuilder que marque consulta como diferida
- [x] MÃ©todo ->collect() para ejecutar y obtener resultado
- [x] QueryPlan intermedio en lugar de SQL inmediata
- [x] GeneraciÃ³n de SQL final optimizada al llamar collect()
- [x] Combinar select, where, orderBy y with() en un solo SQL optimizado
- [x] OptimizaciÃ³n de plan de ejecuciÃ³n:
    - [x] Analizar cadena de operaciones antes de ejecutar
    - [x] Optimizar JOINs y eliminar subconsultas innecesarias
    - [x] Combinar WHERE clauses
- [x] Validar equivalencia de resultados con consultas normales
- [x] Comparar rendimiento en operaciones encadenadas
- [x] Checklist de calidad:
    - [x] Ejecutar phpstan y corregir errores PHP
    - [x] Ejecutar php-cs-fixer fix para formato de cÃ³digo
    - [ ] Ejecutar psalm --plugin=psalm-security-plugin para anÃ¡lisis de seguridad (bloqueado por versiÃ³n PHP)
    - [x] Ejecutar cargo clippy y corregir errores Rust
    - [x] Compilar binario Rust y copiar a src/binary
    - [x] Ejecutar composer dump-autoload -o genera el autoloader mÃ¡s rÃ¡pido y liviano para entornos de despliegue
    - [x] Ejecutar tests de PHP y Rust, corregir errores y volver a validar
    - [x] Tests de equivalencia funcional (12/12 tests passing)
    - [x] Benchmarks de rendimiento lazy vs inmediato
    - [x] DocumentaciÃ³n completa actualizada con ejemplos
### Tarea 2.2: Completar Operaciones CRUD Faltantes [âœ…] COMPLETADA (05/08/2025)
- [x] **MÃ©todo `upsert()` para un solo registro** âœ…
    - [x] Implementar `QueryBuilder->upsert(array $data, array $uniqueKeys)` âœ…
    - [x] Soporte en Rust para operaciÃ³n upsert individual âœ…
    - [x] Sintaxis especÃ­fica por motor de BD: âœ…
        - [x] MySQL: `INSERT ... ON DUPLICATE KEY UPDATE` âœ…
        - [x] PostgreSQL: `INSERT ... ON CONFLICT DO UPDATE` âœ…
        - [x] SQLite: `INSERT OR REPLACE INTO` âœ…
- [x] **MÃ©todo `insertOrUpdate()` alternativo** âœ…
    - [x] Verificar existencia y decidir INSERT vs UPDATE âœ…
    - [x] OptimizaciÃ³n para evitar dos consultas cuando sea posible âœ…
- [x] **MÃ©todos de conveniencia adicionales** âœ…
    - [x] `save()` inteligente (detecta si es nuevo o existente) âœ…
    - [x] `createOrUpdate()` con condiciones personalizadas âœ…
    - [x] `replaceInto()` para compatibilidad MySQL âœ…
- [x] **IntegraciÃ³n con VersaModel** âœ…
    - [x] MÃ©todo `upsert()` en instancias de modelo âœ…
    - [x] Auto-detecciÃ³n de claves Ãºnicas desde esquema âœ…
- [x] Tests unitarios completos âœ…
- [x] DocumentaciÃ³n completa con ejemplos (`docs/user-guide/11-upsert-replace-operations.md`) âœ…
- [x] Checklist de calidad: âœ…
    - [x] CÃ³digo PHP con validaciÃ³n completa âœ…
    - [x] Soporte Rust completamente implementado âœ…
    - [x] Tests de estructura y funcionalidad âœ…
    - [x] DocumentaciÃ³n exhaustiva con ejemplos prÃ¡cticos âœ…
